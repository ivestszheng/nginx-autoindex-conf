worker_processes 1;

events {
    worker_connections 1024;
}

http {
    include mime.types;
    default_type application/octet-stream;

    sendfile on;

    keepalive_timeout 65;

server {
    listen 80;
    server_name localhost;

    # 全局安全头（保持不变）
    add_header Cache-Control "no-store, no-cache, must-revalidate, max-age=0";
    add_header Pragma "no-cache";
    add_header Expires "0";
    add_header access-control-allow-origin "*";
    add_header referrer-policy "no-referrer";
    add_header x-content-type-options nosniff;
    add_header x-xss-protection "1; mode=block";
    add_header x-frame-options sameorigin;

    # 根路径特殊处理
    location = / {
        autoindex on;
        autoindex_localtime on;
        autoindex_exact_size off;
        add_after_body /.autoindex.html;
    }

    error_page 500 502 503 504 /.50x.html;
    location = /50x.html { root html; }
}
}